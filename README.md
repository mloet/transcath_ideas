# Valve Measuring Ideas

After doing some poking around to see what research and experimentation has already been done, I saw that there had been some parties that had tried working with YOLO series and other object detection models to detect the valve opening and provide a bounding box. While I imagine that it would be possible, a single camera approach might make it difficult to get accurate measurements from just a bounding box considering the variance in distance and camera angle. I also think that there are probably more accurate models that could be used, as great as YOLO is; I have found that DETR models have worked better for me in terms of accuracy in the past. While it might be possible to train a model to directly predict diameter if we had access to sufficient labeled data of premeasured openings, I imagine it would be very difficult to train a model to predict this directly. Therefore, I think that it could be best to pair a ML model with some more traditional computer vision techniques for better feature engineering.

Certain approaches could be ruled out by knowing what camera setups are available. Ascertaining the diameter of a tunnel would probably be easiest with a point cloud, but I would imagine that there is no lidar camera small enough to fit on a catheter. My first thought when you posited the problem was to use a feature matching algorithm (like SIFT or SURF) and the camera intrinsics to get an idea of the distance and 3-D contstuction of the valve edges. Here is a method used to measure tunnels, which could have interesting methodologies that could be adapted: https://www.mdpi.com/1424-8220/20/17/4945. If it was possible to have a catheter with two cameras so that you could use stereo matching to normalize the image on the detected valve I would imagine that using such an approach would be much more robust than what we could get from a single camera. However, you did mention the access to videos, so we could potentially use a structure from motion approach (https://cmsc426.github.io/sfm/, https://github.com/harish-vnkt/structure-from-motion), which is similar to how you would use two cameras and a feature matching algorithm, but using a single camera and the motion of that camera to achieve a similar normalization by feature matching as stereo matching. If we found that neither of these options make sense, we could also try using a model specifically designed to estimate depth (DepthAnything v2 comes to mind: https://github.com/DepthAnything/Depth-Anything-V2 ). I worry that images that arenâ€™t very clear could prove an obstacle to relying too much on trained models without intelligent preprocessing, but it is certainly something worth trying.

I found a great paper that details a bunch of approaches to using computer vision in transcatheter intervention, including annulus measurement, segmentation tasks, and centerline extraction, here: https://pmc.ncbi.nlm.nih.gov/articles/PMC4848047/#abstract1. I think there are a ton of techniques detailed here that would be worth trying out, especially some of the methods used for edge and contour extraction. Many of the model based approaches described in the paper are quite old, so possibly utilizing SOTA models of today with some of the other methodology for feature extraction and preprocessing could be interesting to try. 

Below are a few more papers that I thought might be interesting, and this repo (https://github.com/mloet/transcath_ideas) contains some code snippets of methods that I thought could be worth exploring.

Computer Vision Techniques for Transcatheter Intervention: https://pmc.ncbi.nlm.nih.gov/articles/PMC4848047/#abstract1
A Deep Learning Framework for Design and Analysis of Surgical Bioprosthetic Heart Valves: https://www.nature.com/articles/s41598-019-54707-9
Automatic Aortic Valve Extraction Using Deep Learning with Contrast-Enhanced Cardiac CT Images: https://pmc.ncbi.nlm.nih.gov/articles/PMC11766280/#abstract1
AVD-YOLOv5: a new lightweight network architecture for high-speed aortic valve detection from a new and large echocardiography dataset: https://www.researchgate.net/publication/379910364_AVD-YOLOv5_a_new_lightweight_network_architecture_for_high-speed_aortic_valve_detection_from_a_new_and_large_echocardiography_dataset




